(function(){function ba(a){var b=Math.sin(a);a=Math.cos(a);return[a,0,-b,0,0,1,0,0,b,0,a,0,0,0,0,1]}function ca(a){var b=Math.sin(a);a=Math.cos(a);return[1,0,0,0,0,a,-b,0,0,b,a,0,0,0,0,1]}function z(a,b,e){var g=[1,0,0,0,0,1,0,0,0,0,1,0,a,b,e,1];g.n=[1,0,0,0,0,1,0,0,0,0,1,0,-a,-b,-e,1];return g}function da(a,b,e){var g=[a,0,0,0,0,b,0,0,0,0,e,0,0,0,0,1];g.n=[1/a,0,0,0,0,1/b,0,0,0,0,1/e,0,0,0,0,1];return g}function V(a){var b=ca(a);b.n=ca(-a);return b}function J(a,b){var e,g,c,h=[];for(e=0;e<b.length;e++)h[e]=
0;for(e=0;4>e;e++)for(g=0;g<b.length/4;g++)for(c=0;4>c;c++)h[4*g+e]+=a[4*c+e]*b[4*g+c];return h}function ea(a,b){var e=J(a,b);e.n=J(b.n,a.n);return e}function Aa(a){return[a[0],a[4],a[8],0,a[1],a[5],a[9],0,a[2],a[6],a[10],0,0,0,0,1]}function H(a){var b=a.slice();this.c=function(e){e.uM4fv(e.gUL(v,"i"),!1,b)}}function Ba(){this.c=function(a){O=a.n;O.n=a}}function Ca(){this.c=function(a){fa=a}}function ha(a,b){b=a.f.reduce(ea,b);f.uM4fv(f.gUL(v,"mv"),!1,b);f.uM4fv(f.gUL(v,"nm"),!1,Aa(b.n));a.o.map(function(e){e.c(f)});
a.c.map(function(e){ha(e,b)})}function ia(a,b){b=a.f.reduce(ea,b);a.r&&a.r.map(function(e){e.c(b)});a.c.map(function(e){ia(e,b)})}function P(a,b,e){var g=e?e:1;this.n=b?b:10;this.c=function(c){var h=Math.sin(2*c*Q*g);c=Math.cos(2*c*Q*g);return[h,-c,0,0,0,0,1,0,-c,-h,0,0,-h*a,c*a,0,1]}}function ja(a,b,e,g){g=g?g:1;for(var c=0;4>c;c++)a.push(g*b[4*e+c])}function ka(a,b,e){var g,c,h=[],r=[],d=[],n=[],u=1.5*e.n|0,k=2*(u-1)*(b-1),A=f.cB(),x=f.cB(),m=f.cB(),B=f.cB();for(g=0;g<u;g++){var C=g/(u-1);C=e.c(C);
for(c=0;c<b;c++){var y=c/(b-1);y=a.c(y);y=J(C,y);ja(h,y,3);ja(r,y,0,-1);n.push((2*g+c+0)%3?0:1,(2*g+c+1)%3?0:1,(2*g+c+2)%3?0:1,1)}}for(g=0;g<u-1;g++)for(c=0;c<b-1;c++)d.push(g*b+c,g*b+c+1,(g+1)*b+c),d.push(g*b+c+1,(g+1)*b+c+1,(g+1)*b+c);f.bB(34962,A);f.bD(34962,new Float32Array(n),35044);f.bB(34962,m);f.bD(34962,new Float32Array(h),35044);f.bB(34962,x);f.bD(34962,new Float32Array(r),35044);f.bB(34963,B);f.bD(34963,new Uint16Array(d),35044);this.c=function(p){p.bB(34962,A);p.elVAA(c=p.gAL(v,"g"));
p.vAP(c,4,5126,!1,0,0);p.bB(34962,m);p.elVAA(c=p.gAL(v,"v"));p.vAP(c,4,5126,!1,0,0);p.bB(34962,x);p.elVAA(c=p.gAL(v,"N"));p.vAP(c,4,5126,!1,0,0);p.bB(34963,B);p.dEl(4,3*k,5123,0)}}function Da(a){W.cpy(la,4096,a.outputBuffer.getChannelData(0));la+=4096}var v,F,ma,na;var t=document;var O,fa,Q=Math.PI,oa=["uniform mat4 mv,nm,p;attribute vec4 g,v,N;varying vec4 c,n,f;void main(){gl_Position=p*mv*v;n=nm*N;c=g;f=mv*v;}","uniform highp mat4 i;uniform highp vec4 l;varying highp vec4 c,n,f;void main(){gl_FragColor=vec4(i[3].aaa*max(0.,1.-4.*min(c.b,min(c.g,c.r)))+max(i[0].rgb,i[1].rgb*max(0.,dot(normalize(l-f),normalize(n)))+i[2].rgb*pow(max(0.,dot(normalize(-f),reflect(-normalize(l-f),normalize(n)))),i[2].a)),1.);}"],
R=[0,0,0,1],K=[.1,.12,.05,1,.2,.4,.5,1,.1,.1,.1,1,0,0,0,0],pa=0,qa=null,ra=function(a){qa||=a;var b=116*(a-qa)/6E4,e=innerWidth,g=innerHeight;e==ma&&g==na||f.vp(0,0,ma=F.width=e,na=F.height=g);f.el(2929);f.el(2884);a={f:[],o:[],c:[]};var c=2*b,h={f:[],o:[],c:[]},r={f:[da(.2,.2,.2),z(0,4,0)],o:[new H(K),L],c:[]},d={f:[z(2,0,0)],o:[new H(K),L],c:[]};pa=.1<2*Math.sin(.5*c)?2*Math.sin(.5*c):.1;c={f:[z(0,-3,0),V(pa)],o:[new H(K),L],c:[]};var n={f:[z(0,-3,0)],o:[new H(K),L],c:[]};c.c.push(n);d.c.push(c);
c={f:[z(-1,0,0)],o:[new H(K),L],c:[]};r.c.push(d);r.c.push(c);h.c.push(r);h={f:[],o:[],c:[{f:[],o:[],c:[h]}]};r=[z(0,-15,0)];d=a.c;c=d.push;n=z(0,0,0);b/=3;var u=ba(b);u.n=ba(-b);c.call(d,{f:[],o:[],c:[{f:r,o:[],c:[h]},{f:[n,u,z(0,0,45),V(.2)],o:[],c:[],r:[new Ba]},{f:[z(0,0,0),da(.1,.1,.1)],o:[new H([3,3,3,0,9,9,9,0,0,0,0,1,0,0,0,0]),Ea],c:[],r:[new Ca]}]});f.clCl(R[0],R[1],R[2],R[3]);f.cl(16640);e=[5/(e/g),0,0,0,0,5,0,0,0,0,-1,-1,0,0,-1,0];f.uM4fv(f.gUL(v,"p"),!1,e);f.uP(v);ia(a,V(0));f.u4fv(f.gUL(v,
"l"),J(O,J(fa,[0,0,0,1])));ha(a,O);requestAnimationFrame(ra)};t.body.innerHTML="Click!";t.body.appendChild(F=t.createElement("canvas"));t=F.style;t.position="fixed";t.left=t.top=0;var f=F.getContext("webgl2");for(t in f)f[t.match(/^.|[A-Zlp1-4]|[fuiv]*$/g).join("")]=f[t];t=f.cS(35633);f.sS(t,oa[0]);f.cplS(t);f.aS(v=f.cP(),t);t=f.cS(35632);f.sS(t,oa[1]);f.cplS(t);f.aS(v,t);f.lP(v);var Ea=new function(a){var b=f.cB(),e=f.cB(),g=f.cB(),c=f.cB();a=[];var h=[],r=[];a=[-1,-1,1,1,1,-1,1,1,1,1,1,1,-1,1,1,
1,-1,-1,-1,1,-1,1,-1,1,1,1,-1,1,1,-1,-1,1,-1,1,-1,1,-1,1,1,1,1,1,1,1,1,1,-1,1,-1,-1,-1,1,1,-1,-1,1,1,-1,1,1,-1,-1,1,1,1,-1,-1,1,1,1,-1,1,1,1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,1,1,1,-1,1,-1,1];h=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];r=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];f.bB(34962,
b);f.bD(34962,new Float32Array(h),35044);f.bB(34962,e);f.bD(34962,new Float32Array(a),35044);f.bB(34962,g);f.bD(34962,new Float32Array(h),35044);f.bB(34963,c);f.bD(34963,new Uint16Array(r),35044);this.c=function(d){var n;d.bB(34962,b);d.elVAA(n=d.gAL(v,"g"));d.vAP(n,4,5126,!1,0,0);d.bB(34962,e);d.elVAA(n=d.gAL(v,"v"));d.vAP(n,4,5126,!1,0,0);d.bB(34962,g);d.elVAA(n=d.gAL(v,"N"));d.vAP(n,4,5126,!1,0,0);d.bB(34963,c);d.dEl(4,36,5123,0)}}(1);var L=new ka(new P(1,10,.5),32,new P(0,32));new ka(new P(-10,
10,.5),32,new P(0,32));var W=new function(){var a=function(d){return Math.sin(2*d*Q)},b=[a,function(d){return.5>d%1?1:-1},function(d){return d%1*2-1},function(d){d=d%1*4;return 2>d?d-1:3-d}],e,g,c,h,r;this.i=function(d){e=d;g=d.ep;c=0;h=d.rl*d.pl*(g+1)*2;r=new Int32Array(h)};this.g=function(){var d,n,u,k,A,x=new Int32Array(h),m=e.s[c],B=e.rl,C=e.pl,y=0,p=0,G,S=[];for(n=0;n<=g;++n){var M=m.p[n];for(u=0;u<C;++u){if(A=M?m.c[M-1].f[u]:0)m.i[A-1]=m.c[M-1].f[u+C]||0,17>A&&(S=[]);var Fa=b[m.i[16]],Ga=m.i[17]/
512,Ha=2**(m.i[18]-9)/B,Ia=m.i[19],sa=m.i[20],Ja=.00308*m.i[21],Ka=1-m.i[22]/255,X=1E-5*m.i[23],La=m.i[24]/32,Ma=m.i[25]/512,Na=2*Q*2**(m.i[26]-9)/B,ta=m.i[27]/255,Y=m.i[28]*B&-2;A=(n*C+u)*B;for(k=0;4>k;++k)if(d=M?m.c[M-1].n[u+k*C]:0){if(!S[d]){var l=S;var w=d;var ua=G=void 0,T,D,q=m,va=d,Oa=b[q.i[0]],Pa=q.i[1],Qa=q.i[3]/32,Ra=b[q.i[4]],Sa=q.i[5],Ta=q.i[8]/32,wa=q.i[9],I=q.i[10]*q.i[10]*4,U=q.i[11]*q.i[11]*4,Z=q.i[12]*q.i[12]*4,Ua=1/Z,Va=-q.i[13]/16,N=q.i[14],Wa=B*2**(2-q.i[15]),xa=new Int32Array(I+
U+Z),ya=0,za=0;for(T=D=0;D<I+U+Z;D++,T++){0<=T&&(N=N>>8|(N&255)<<4,T-=Wa,ua=.004*2**((va+(N&15)+q.i[2]-128-128)/12),G=.004*2**((va+(N&15)+q.i[6]-128-128)/12)*(1+8E-4*q.i[7]));var E=1;D<I?E=D/I:D>=I+U&&(E=(D-I-U)*Ua,E=(1-E)*3**(Va*E));ya+=ua*E**Qa;var aa=Oa(ya)*Pa;za+=G*E**Ta;aa+=Ra(za)*Sa;wa&&(aa+=(2*Math.random()-1)*wa);xa[D]=80*aa*E|0}l[w]=xa}w=S[d];d=0;for(l=2*A;d<w.length;d++,l+=2)x[l]+=w[d]}for(d=0;d<B;d++)k=2*(A+d),l=x[k],w=Ja,Ia&&(w*=Fa(Ha*k)*Ga+.5),w=1.5*Math.sin(w),y+=w*p,l=Ka*(l-p)-y,p+=
w*l,l=3==sa?p:1==sa?l:y,X&&(l*=X,l=1>l?-1<l?a(.25*l):-1:1,l/=X),l*=La,w=Math.sin(Na*k)*Ma+.5,G=l*(1-w),l*=w,k>=Y&&(G+=x[k-Y+1]*ta,l+=x[k-Y]*ta),x[k]=G|0,x[k+1]=l|0,r[k]+=G|0,r[k+1]+=l|0}}c++;return c/e.nc};this.cpy=function(d,n,u){for(var k=0;k<n;k++)u[k]=r[2*d+2*k]/32768}};for(W.i({s:[{i:[2,100,128,0,3,201,128,0,0,0,0,24,15,0,0,0,0,57,6,1,2,193,0,2,35,147,6,121,6],p:[1,2,3,4,6,2,3,4,1,2,3,6,2,2],c:[{n:[111,,123,,135,,111,,123,,135,,111,,123,,137,,111,,123,,137,,111,,123,,137,,139],f:[]},{n:[111,
111,123,,135,,111,,123,,135,,111,,123,,137,,111,,123,,137,,139,,111,,123,,125,,142],f:[]},{n:[109,,121,,133,,109,,121,,133,,109,,121,,135,,109,,121,,135,,109,,121,,135,,137],f:[]},{n:[104,104,116,,128,,116,,104,104,116,,128,,128,,104,104,116,,116,,104,,106,118,118,106,121,133,133,121],f:[]},{n:[103,,115,,127,,103,,115,,127,,103,,115,,113,,101,,125,,113,,101,,125,,113,,118],f:[]},{n:[111,111,123,,135,,111,,123,,135,,111,,123,,137,,111,,123,,137,,139,,123,,140,,152,,142,,,,,,,,,,,,,,,,144,,,,,,,,145,
,,,147],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,0,24,17,0,0,0,0,57,6,1,2,193,0,0,32,147,6,121,6],p:[,,1,,1,,1],c:[{n:[156,154,,149],f:[]}]},{i:[0,255,116,64,0,255,116,0,64,0,4,6,35,0,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[,,,,1,1,1,1,1],c:[{n:[135,,,135,135,,,135,135,,,135,135,,,135,135,,,135,135,,,135,135,,,135,135,,,135],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,34,0,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,,,,1,1,1,1,1,1,,,1,1,1],c:[{n:[,,135,,,,135,,,,135,,,,135,,,,135,,,,135,,,,135,,,135,135],
f:[]}]}],rl:5703,pl:32,ep:14,nc:4});1>W.g(););var la=0;onclick=()=>{onclick=null;F.style.cursor="none";F.requestFullscreen();var a=new AudioContext({sampleRate:44100}),b=a.createScriptProcessor(4096,0,1);b.connect(a.destination);b.onaudioprocess=Da;requestAnimationFrame(ra)}})();
